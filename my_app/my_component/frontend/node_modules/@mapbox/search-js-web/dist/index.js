var ho=Object.create;var Re=Object.defineProperty,go=Object.defineProperties,fo=Object.getOwnPropertyDescriptor,vo=Object.getOwnPropertyDescriptors,bo=Object.getOwnPropertyNames,Ai=Object.getOwnPropertySymbols,Mo=Object.getPrototypeOf,Li=Object.prototype.hasOwnProperty,xo=Object.prototype.propertyIsEnumerable;var Ci=(s,e,i)=>e in s?Re(s,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):s[e]=i,h=(s,e)=>{for(var i in e||(e={}))Li.call(e,i)&&Ci(s,i,e[i]);if(Ai)for(var i of Ai(e))xo.call(e,i)&&Ci(s,i,e[i]);return s},pe=(s,e)=>go(s,vo(e)),ki=s=>Re(s,"__esModule",{value:!0});var Eo=(s,e)=>{for(var i in e)Re(s,i,{get:e[i],enumerable:!0})},wi=(s,e,i,o)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of bo(e))!Li.call(s,n)&&(i||n!=="default")&&Re(s,n,{get:()=>e[n],enumerable:!(o=fo(e,n))||o.enumerable});return s},jt=(s,e)=>wi(ki(Re(s!=null?ho(Mo(s)):{},"default",!e&&s&&s.__esModule?{get:()=>s.default,enumerable:!0}:{value:s,enumerable:!0})),s),To=(s=>(e,i)=>s&&s.get(e)||(i=wi(ki({}),e,1),s&&s.set(e,i),i))(typeof WeakMap!="undefined"?new WeakMap:0);var li=(s,e,i)=>{if(!e.has(s))throw TypeError("Cannot "+i)};var t=(s,e,i)=>(li(s,e,"read from private field"),i?i.call(s):e.get(s)),r=(s,e,i)=>{if(e.has(s))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(s):e.set(s,i)},d=(s,e,i,o)=>(li(s,e,"write to private field"),o?o.call(s,i):e.set(s,i),i);var R=(s,e,i)=>(li(s,e,"access private method"),i);var N=(s,e,i)=>new Promise((o,n)=>{var a=c=>{try{u(i.next(c))}catch(p){n(p)}},l=c=>{try{u(i.throw(c))}catch(p){n(p)}},u=c=>c.done?o(c.value):Promise.resolve(c.value).then(a,l);u((i=i.apply(s,e)).next())});var ss={};Eo(ss,{MapboxAddressAutofill:()=>Ee,MapboxAddressConfirmation:()=>ee,MapboxAddressMinimap:()=>Le,MapboxHTMLEvent:()=>x,MapboxSearchBox:()=>Te,autofill:()=>co,config:()=>b,confirmAddress:()=>po,getAutofillSearchText:()=>Me,getFormAutofillValues:()=>Yt});var fi=require("@popperjs/core/lib/popper-lite");var Ii=document.implementation.createHTMLDocument();function B(s,e){let i={};for(let[o,n]of Object.entries(e))i[o]=s.querySelector(n);return i}function Hi(s){return Array.from(s.childNodes||[]).filter(e=>e.nodeType===Node.ELEMENT_NODE)}function M(s){let e=document.createElement("template");return e.innerHTML=s,e.content.firstElementChild}function Ri(s){let e=Ii.createElement("style");return e.textContent=s,Ii.head.appendChild(e),e.sheet}function Bi(s){return window.getComputedStyle(s).display!=="none"}function F(s,e){if(!s)return;Object.getOwnPropertyDescriptor(s.constructor.prototype,"value").set.call(s,e);let o=s;o._valueTracker&&o._valueTracker.setValue("");let n=new Event("input",{bubbles:!0});n.simulated=!0,s.dispatchEvent(n);let a=new Event("change",{bubbles:!0});a.simulated=!0,s.dispatchEvent(a)}function Nt(s,e=!1){let i,o,n=s.getBoundingClientRect();if(s.style.display==="none"||n.height===0&&n.width===0){let a=s.cloneNode(e);s.parentElement.appendChild(a),a.style.setProperty("display","block","important");let l=a.getBoundingClientRect();i=l.width,o=l.height,a.style.setProperty("display","none"),a.remove()}else i=n.width,o=n.height;return{height:Math.floor(o),width:Math.floor(i)}}var yo=new RegExp("[_a-zA-Z]+[_a-zA-Z0-9-]*","g"),So=new RegExp(`\\.${yo.source}`,"g"),Ao=new RegExp("^\\s*(@(?:media|supports)[^{]*){(.*)}\\s*$");function Be(s,e){return s.replace(So,i=>"."+e(i.slice(1)))}function di(s,e){let o=Ri(s).cssRules;function n(l){if(l instanceof CSSStyleRule)return`${Be(l.selectorText,e)} { ${l.style.cssText} }`;let u=Ao.exec(l.cssText.split(`
`).join(""));if(u&&u.length>2){let c=u[1],p=u[2];return`${c} { ${di(p,e)} }`}return l.cssText}let a="";for(let l of Array.from(o))a+=n(l)+`

`;return a.trim()}function ci(s,e){let i=Array.from(s.querySelectorAll("[class]"));i.push(s);for(let o of i){let{classList:n}=o;for(let a of Array.from(n))n.remove(a),n.add(e(a))}return s}var Di=require("@mapbox/search-js-core");var ui=1.4;function pi(s,e,i=.5){let{center:o,zoom:n}=s.cameraForBounds(e),a=Math.max(n-i,0);return{center:o,zoom:a,speed:ui}}function Fi(s){switch(s){case"street":return 15;case"locality":case"oaza":return 14;case"place":case"city":return 13;case"district":return 9;case"region":case"prefecture":return 6;case"country":return 4;default:return 16}}function Ut(s,e){return`https://api.mapbox.com/styles/v1/${s}/${e}/static/`}var Oi=Ut("mapbox","satellite-streets-v11"),Pi="20d01",_i=["mapbox.com","mapbox.cn","tilestream.net"];function C(){return"mbx"+new Di.SessionToken().id.slice(0,8)}function $t(s){try{return JSON.parse(s)}catch(e){return null}}function G(s,e){if(s==null||e==null||typeof s!="object"||typeof e!="object")return s===e;let i=Object.keys(s),o=Object.keys(e);if(i.length!==o.length)return!1;for(let n of i)if(!G(s[n],e[n]))return!1;return!0}function mi(s,e){let i=Math.pow(10,e);return Math.round(s*i)/i}function ji(s){return Boolean(s.match(/localhost|[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}|::1|\.local|^$/gi))}function Ni(s){return Boolean(_i.some(e=>s.includes(e)))}var me,K,Z,y=class extends HTMLElement{constructor(){super(...arguments);r(this,me,C());r(this,K,void 0);r(this,Z,e=>`${t(this,me)}--${e}`)}get template(){return null}get templateStyle(){return null}get templateUserStyle(){return null}clonedCallback(e,i){let o=a=>a.replace(e,i);ci(this,o);let n=Array.from(this.querySelectorAll("style"));for(let a of n)a.textContent=Be(a.textContent,o);n.length&&d(this,K,n[n.length-1])}connectedCallback(){if(this.childElementCount>0){let n=this.dataset.seed,a=t(this,me);n&&n!==a&&(this.clonedCallback(n,a),this.dataset.seed=a);return}this.dataset.seed=t(this,me);let e=this.template;if(e){let n=this.prepareTemplate(e);this.appendChild(n)}let i=this.templateStyle;if(i){let n=document.createElement("style");n.textContent=this.prepareCSS(i),this.appendChild(n)}let o=document.createElement("style");this.templateUserStyle&&(o.textContent=this.prepareCSS(this.templateUserStyle)),this.appendChild(o),d(this,K,o)}prepareTemplate(e){let i=e.content.firstElementChild;return ci(i.cloneNode(!0),t(this,Z))}prepareCSS(e){return di(e,t(this,Z))}updateTemplateUserStyle(e){!t(this,K)||(t(this,K).textContent=this.prepareCSS(e))}querySelector(e){return super.querySelector(Be(e,t(this,Z)))}querySelectorAll(e){return super.querySelectorAll(Be(e,t(this,Z)))}addEventListener(e,i,o){super.addEventListener(e,i,o)}removeEventListener(e,i,o){super.removeEventListener(e,i,o)}dispatchEvent(e){return super.dispatchEvent(e)}};me=new WeakMap,K=new WeakMap,Z=new WeakMap;var x=class extends CustomEvent{constructor(e,i){super(e,{composed:!0,detail:i})}clone(e){let i=new x(this.type,this.detail);return e&&Object.defineProperty(i,"target",{value:e}),i}};var Ui=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<svg viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg">
  <path fill-rule="evenodd" clip-rule="evenodd" d="M3.79289 3.79289C4.18342 3.40237 4.81658 3.40237 5.20711 3.79289L9 7.58579L12.7929 3.79289C13.1834 3.40237 13.8166 3.40237 14.2071 3.79289C14.5976 4.18342 14.5976 4.81658 14.2071 5.20711L10.4142 9L14.2071 12.7929C14.5976 13.1834 14.5976 13.8166 14.2071 14.2071C13.8166 14.5976 13.1834 14.5976 12.7929 14.2071L9 10.4142L5.20711 14.2071C4.81658 14.5976 4.18342 14.5976 3.79289 14.2071C3.40237 13.8166 3.40237 13.1834 3.79289 12.7929L7.58579 9L3.79289 5.20711C3.40237 4.81658 3.40237 4.18342 3.79289 3.79289Z" fill="currentColor"/>
</svg>`;var $i=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<svg viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg">
  <path fill-rule="evenodd" clip-rule="evenodd" d="M9 16C12.866 16 16 12.866 16 9C16 5.13401 12.866 2 9 2C5.13401 2 2 5.13401 2 9C2 12.866 5.13401 16 9 16ZM6.88128 4.88128C7.36552 4.39704 8.02229 4.125 8.70711 4.125H9.79289C10.4777 4.125 11.1345 4.39704 11.6187 4.88128C12.103 5.36552 12.375 6.02229 12.375 6.70711V6.86762C12.375 7.8775 11.8451 8.81333 10.9792 9.33291L10.4212 9.6677C10.1547 9.82759 9.96958 10.0882 9.90264 10.3844C9.87221 10.5191 9.76307 10.6324 9.625 10.6324H8.375C8.23693 10.6324 8.12387 10.5202 8.13584 10.3826C8.21527 9.47002 8.72673 8.64354 9.52082 8.16709L10.0788 7.8323C10.4177 7.62899 10.625 7.26279 10.625 6.86762V6.70711C10.625 6.48642 10.5373 6.27477 10.3813 6.11872C10.2252 5.96267 10.0136 5.875 9.79289 5.875H8.70711C8.48642 5.875 8.27477 5.96267 8.11872 6.11872C7.96267 6.27477 7.875 6.48642 7.875 6.70711V6.8889C7.875 7.37215 7.48325 7.7639 7 7.7639C6.51675 7.7639 6.125 7.37215 6.125 6.8889V6.70711C6.125 6.02229 6.39704 5.36552 6.88128 4.88128ZM10 13C10 13.5523 9.55228 14 9 14C8.44772 14 8 13.5523 8 13C8 12.4477 8.44772 12 9 12C9.55228 12 10 12.4477 10 13Z" fill="currentColor"/>
</svg>`;var zi=`<svg width="48" height="56" viewBox="0 0 48 56" fill="none" xmlns="http://www.w3.org/2000/svg">
<g filter="url(#filter0_d_17_871)">
<path d="M24 50.4L37.7887 36.2834C40.5158 33.6058 42.3729 30.1944 43.1253 26.4806C43.8777 22.7667 43.4915 18.9172 42.0156 15.4188C40.5397 11.9204 38.0403 8.9303 34.8336 6.82657C31.6268 4.72284 27.8567 3.59998 24 3.59998C20.1433 3.59998 16.3732 4.72284 13.1664 6.82657C9.95966 8.9303 7.4603 11.9204 5.98438 15.4188C4.50846 18.9172 4.12229 22.7667 4.87468 26.4806C5.62707 30.1944 7.48424 33.6058 10.2113 36.2834L24 50.4Z" fill="currentColor"/>
<path d="M37.2632 35.7482L37.2576 35.7537L37.2521 35.7593L24 49.3266L10.7479 35.7593L10.7424 35.7537L10.7368 35.7482C8.11558 33.1746 6.33213 29.8974 5.60975 26.3316C4.88738 22.766 5.25802 19.07 6.6754 15.7103C8.09285 12.3505 10.4942 9.47664 13.5778 7.45367C16.6616 5.4306 20.2886 4.34998 24 4.34998C27.7114 4.34998 31.3384 5.4306 34.4222 7.45367C37.5058 9.47664 39.9072 12.3505 41.3246 15.7103C42.742 19.07 43.1126 22.766 42.3903 26.3316C41.6679 29.8974 39.8844 33.1746 37.2632 35.7482Z" stroke="white" stroke-width="1.5"/>
</g>
<ellipse cx="24" cy="22.45" rx="5.84999" ry="5.85" fill="white"/>
<defs>
<filter id="filter0_d_17_871" x="0.5" y="0.599976" width="47" height="54.8" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
<feFlood flood-opacity="0" result="BackgroundImageFix"/>
<feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>
<feOffset dy="1"/>
<feGaussianBlur stdDeviation="2"/>
<feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.2 0"/>
<feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_17_871"/>
<feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_17_871" result="shape"/>
</filter>
</defs>
</svg>`;var Fe="1.0.0-beta.9";var Io=`https://api.mapbox.com/search-js/v${Fe}/img/style-toggle-satellite.jpg`,Ho=`https://api.mapbox.com/search-js/v${Fe}/img/style-toggle-default.jpg`,Ro=768-1,Bo=`@media only screen and (max-width: ${Ro}px)`,hi={variables:{unit:["mobile","16px","14px"],unitHeader:["mobile","24px","18px"],minWidth:"min(300px, 100vw)",spacing:"0.75em",padding:"0.5em 0.75em",paddingModal:"1.25em",colorText:"rgba(0, 0, 0, 0.75)",colorPrimary:"#4264FB",colorSecondary:"#667F91",colorBackground:"#fff",colorBackgroundHover:"#f5f5f5",colorBackgroundActive:"#f0f0f0",colorBackdrop:"rgba(102, 127, 145, 0.3)",border:"none",borderRadius:"4px",boxShadow:`
      0 0 10px 2px rgba(0, 0, 0, 0.05),
      0 0 6px 1px rgba(0, 0, 0, 0.1),
      0 0 0 1px rgba(0, 0, 0, 0.1)
    `,lineHeight:"1.2em",fontFamily:`
      -apple-system, BlinkMacSystemFont,
      avenir next, avenir,
      segoe ui,
      helvetica neue, helvetica,
      Ubuntu, roboto, noto, arial, sans-serif
    `,fontWeight:"normal",fontWeightSemibold:"600",fontWeightBold:"bold",duration:"150ms",curve:"ease-out"},icons:{close:Ui,question:$i,marker:zi},images:{styleToggleDefault:Ho,styleToggleSatellite:Io}};function E(s,e={}){let i=h(h({},hi.variables),e.variables||{}),o=e.cssText||"",n="";for(let[a,l]of Object.entries(i)){if(!Array.isArray(l)){n+=`--${a}: ${l};`;continue}if(l[0]!=="mobile"){let p=JSON.stringify(l);throw new Error(`Unsupported expression in theme variables: ${a} ${p}`)}let[,u,c]=l;o+=`${Bo} { ${s} { --${a}: ${u} !important; } }`,n+=`--${a}: ${c};`}return o+`${s} { ${n} }`}function w(s,e={}){return h(h({},hi.icons),e.icons||{})[s]}function Xi(s,e={}){return h(h({},hi.images),e.images||{})[s]}var I="*{box-sizing:border-box!important}[role=button]{cursor:pointer}.MapboxSearch{--width:0;display:none}.Results{background-color:var(--colorBackground);border:var(--border);border-radius:var(--borderRadius);box-shadow:var(--boxShadow);color:var(--colorText);font-family:var(--fontFamily);font-size:var(--unit);font-weight:var(--fontWeight);line-height:var(--lineHeight);margin-top:var(--spacing)!important;min-width:var(--minWidth);overflow-y:auto;position:absolute;transform:translateZ(0);transition:visibility var(--duration);width:var(--width);z-index:1000}.Results:not([aria-hidden=true]){visibility:visible}.Results[aria-hidden=true]{animation:fadein var(--duration) var(--curve) reverse forwards;visibility:hidden}.Suggestion{padding:var(--padding)}.Suggestion:hover{cursor:pointer}.Suggestion[aria-selected=true]{background-color:var(--colorBackgroundHover)}.Suggestion:active{background-color:var(--colorBackgroundActive)}.SuggestionName{font-weight:var(--fontWeightBold)}.ResultsAttribution{padding:var(--padding)}.ResultsAttribution a{color:var(--colorSecondary)}.ResultsAttribution a:not(:hover){text-decoration:none}.ResultsList{list-style:none;margin:0;padding:0}.Label{display:none}.Input{background-color:var(--colorBackground);border:var(--border);border-radius:var(--borderRadius);box-shadow:var(--boxShadow);color:var(--colorText);font-family:var(--fontFamily);font-size:var(--unit);font-weight:var(--fontWeight);line-height:var(--lineHeight);padding:var(--padding);width:100%}mapbox-address-confirmation-feature[aria-hidden=true],mapbox-address-confirmation-no-feature[aria-hidden=true]{display:none}.MapboxAddressConfirmation{align-items:center;background-color:var(--colorBackdrop);bottom:0;display:flex;justify-content:center;left:0;position:fixed;right:0;top:0;transform:translateZ(0);z-index:1000}.MapboxAddressConfirmation:not([aria-hidden=true]){animation:fadein var(--duration) var(--curve) forwards;visibility:visible}.MapboxAddressConfirmation[aria-hidden=true]{visibility:hidden}.ContentFeature,.ContentNoFeature{width:var(--minWidth)}.Modal{background-color:var(--colorBackground);border:var(--border);border-radius:var(--borderRadius);box-shadow:var(--boxShadow);color:var(--colorText);font-family:var(--fontFamily);font-size:var(--unit);font-weight:var(--fontWeight);line-height:var(--lineHeight);padding:var(--paddingModal);width:100%}@media screen and (max-width:480px){.MapboxAddressConfirmation{align-items:flex-end}.ContentFeature,.ContentNoFeature{width:100%}.Modal{border-bottom-left-radius:0;border-bottom-right-radius:0}}.ModalHeader{align-items:center;color:var(--colorPrimary);display:flex;font-size:var(--unitHeader);font-weight:var(--fontWeightBold);margin-bottom:var(--spacing);user-select:none;width:100%}.ModalMap{height:calc(var(--minWidth)*9/16);margin-left:calc(var(--paddingModal)*-1);width:calc(100% + var(--paddingModal)*2)}.ModalMap[aria-hidden=true]{display:none}.Icon{height:var(--unitHeader);width:var(--unitHeader)}.Icon.IconClose{color:var(--colorSecondary)}.ModalHeaderTitle{flex:1;margin-left:.25em}.ModalFooter{color:var(--colorSecondary);margin-top:var(--spacing);text-align:center}.ModalSubheader{font-weight:var(--fontWeightBold);user-select:none}.ModalDescription{color:var(--colorPrimary)}.ModalAddress,.ModalSubheader{margin-bottom:var(--spacing)}.ModalAddress.ModalAddressApprove{color:var(--colorPrimary)}.Button{border-radius:var(--borderRadius);cursor:pointer;font-weight:var(--fontWeightSemibold);margin-top:var(--spacing);padding:var(--padding);text-align:center;user-select:none;width:100%}.Button[aria-hidden=true]{display:none}.Button.ButtonPrimary{background-color:var(--colorPrimary);color:var(--colorBackground)}.Button.ButtonSecondary{border:1px solid var(--colorSecondary);color:var(--colorSecondary)}@keyframes fadein{0%{opacity:0}to{opacity:1}}.MapboxAddressMinimap{font-family:var(--fontFamily);font-size:var(--unit);font-weight:var(--fontWeight);line-height:var(--lineHeight)}.MapboxAddressMinimap[aria-hidden=true]{display:none}.MinimapImageContainer{border-radius:var(--borderRadius);overflow:hidden}.MinimapImage{height:unset;max-height:unset;max-width:unset;position:relative;width:unset}.MinimapInnerFrame{border:var(--border);border-radius:inherit;height:inherit;left:0;overflow:hidden;position:absolute;top:0;width:inherit}.MinimapMarker{left:50%;position:absolute;top:50%}.MinimapMarker>svg{color:var(--colorPrimary);display:block!important}.MinimapAttributionLogo{bottom:0;left:0;margin:0 0 6px 6px;position:absolute}.MinimapAttributionLogo a{cursor:pointer;display:block;height:23px;width:88px}.MinimapAttributionText{background-color:hsla(0,0%,100%,.65);bottom:0;font:11px/16px Helvetica Neue,Arial,Helvetica,sans-serif;padding:0 5px;position:absolute;right:0}.MinimapAttributionText a{color:rgba(0,0,0,.75);text-decoration:none}.MinimapAttributionText a:hover{color:inherit;text-decoration:underline}.MinimapAttributionText a:not(:first-child){margin-left:3px}.MinimapStyleToggle{background-position:0;background-repeat:no-repeat;background-size:contain;border:2px solid #fff;border-radius:3px;box-shadow:var(--boxShadow);cursor:pointer;height:2em;position:absolute;right:var(--spacing);top:var(--spacing);width:2em}.MinimapFooter{color:var(--colorSecondary);font-family:var(--fontFamily);font-size:var(--unit);margin-top:var(--spacing)}.MinimapEditButtons{bottom:26px;display:flex;font-family:var(--fontFamily);position:absolute;right:var(--spacing)}.MinimapEditButtons .Button{box-shadow:var(--boxShadow)}.MinimapButtonCancel{background-color:var(--colorBackground);margin-left:var(--spacing)}.draggable{cursor:move;cursor:grab}.draggable:active{cursor:grabbing}";var Oo=M(`
<template>
  <div class="MapboxSearch">
      <div class="Label" role="label" aria-live="polite" aria-atomic="true">
      </div>
      <div class="Results" aria-hidden="true">
        <div class="ResultsList" role="listbox">
        </div>
        <div class="ResultsAttribution" aria-hidden="true">
          <a href="https://www.mapbox.com/search-service" target="_blank" tabindex="-1">
            Powered by Mapbox
          </a>
        </div>
      </div>
  </div>
</template>
`),Po=M(`
<template>
  <div class="Suggestion" role="option">
    <div class="SuggestionName"></div>
    <div class="SuggestionDesc"></div>
  </div>
</template>
`);function gi(s,e){return`${s}-${e}`}var ge,H,T,Oe,X,fe,ve,Pe,Yi,U,he,zt,_o,_e,De,je,Ne,Ue,be,Q,$e,$=class extends y{constructor(){super(...arguments);r(this,Pe);r(this,U);r(this,zt);r(this,ge,void 0);r(this,H,null);r(this,T,void 0);r(this,Oe,C());r(this,X,C());r(this,fe,void 0);r(this,ve,0);r(this,_e,{});r(this,De,{});this.retrieveFeature=null;r(this,je,e=>{let{Results:i}=t(this,T),o=e.target;if(o.dataset.mapboxSuccess){delete o.dataset.mapboxSuccess;return}let n=o.value;i.setAttribute("aria-busy","true"),this.session.suggest(n,this.options)});r(this,Ne,e=>{if(!e||!e.suggestions){R(this,U,he).call(this);return}R(this,zt,_o).call(this),e.suggestions.length&&R(this,Pe,Yi).call(this),this.dispatchEvent(new x("suggest",e));let{Results:i}=t(this,T);i.setAttribute("aria-busy","false")});r(this,Ue,e=>{this.dispatchEvent(new x("suggesterror",e));let{Results:i}=t(this,T);i.setAttribute("aria-busy","false"),R(this,U,he).call(this)});r(this,be,()=>{let e=this.input;delete e.dataset.mapboxSuccess,R(this,Pe,Yi).call(this)});r(this,Q,()=>{document.activeElement!==this.input&&(this.session.abort(),R(this,U,he).call(this))});r(this,$e,e=>{if(e.key==="Escape"){R(this,U,he).call(this);return}if(e.key==="ArrowUp"){e.preventDefault(),this.selectedIndex=Math.max(0,this.selectedIndex-1);return}if(e.key==="ArrowDown"){e.preventDefault(),this.selectedIndex=Math.min(this.selectedIndex+1,this.suggestions.length-1);return}if(e.key==="Enter"){e.preventDefault(),this.retrieve(this.suggestions[this.selectedIndex]);return}})}get template(){return Oo}get templateStyle(){return I}get templateUserStyle(){return E(".MapboxSearch",this.theme)}get session(){return t(this,ge)}set session(e){t(this,ge)&&(e.removeEventListener("suggest",t(this,Ne)),e.removeEventListener("suggesterror",t(this,Ue))),e&&(e.addEventListener("suggest",t(this,Ne)),e.addEventListener("suggesterror",t(this,Ue))),d(this,ge,e)}get suggestions(){var e;return(e=this.session.suggestions)==null?void 0:e.suggestions}get input(){return t(this,fe)}set input(e){let i=t(this,fe);i&&(i.removeEventListener("input",t(this,je)),i.removeEventListener("focus",t(this,be)),i.removeEventListener("blur",t(this,Q)),i.removeEventListener("keydown",t(this,$e)),t(this,H)&&t(this,H).destroy()),e&&(e.addEventListener("input",t(this,je)),e.addEventListener("focus",t(this,be)),e.addEventListener("blur",t(this,Q)),e.addEventListener("keydown",t(this,$e)),e.setAttribute("role","combobox"),e.setAttribute("aria-autocomplete","list"),e.setAttribute("aria-controls",t(this,X)),this.isConnected&&d(this,H,(0,fi.createPopper)(e,t(this,T).Results,{placement:"bottom-start"}))),d(this,fe,e)}get selectedIndex(){return t(this,ve)}set selectedIndex(e){let i=t(this,ve);d(this,ve,e);let{ResultsList:o,Label:n}=t(this,T),a=gi(t(this,X),e);if(this.input.setAttribute("aria-activedescendant",a),o.setAttribute("aria-activedescendant",a),i!==e){let l=gi(t(this,X),i),u=o.querySelector(`#${l}`);u==null||u.removeAttribute("aria-selected");let c=o.querySelector(`#${a}`);c==null||c.setAttribute("aria-selected","true")}n.textContent=this.suggestions[e].address+`: Suggestion ${e+1} of ${this.suggestions.length}`}renderItem(e){let i=this.prepareTemplate(Po);return i.id=gi(t(this,X),e),i}fillItem(e,i,o){let[n,a]=Array.from(e.querySelectorAll('[role="option"] > *'));n.textContent="address_line1"in i?i.address_line1||i.matching_name||i.feature_name:i.matching_name||i.feature_name,a.textContent=i.description,o===this.selectedIndex?e.setAttribute("aria-selected","true"):e.removeAttribute("aria-selected")}get options(){return t(this,_e)}set options(e){d(this,_e,e)}get theme(){return t(this,De)}set theme(e){d(this,De,e),!(!t(this,T)||!e)&&this.updateTemplateUserStyle(E(".MapboxSearch",e))}connectedCallback(){super.connectedCallback(),d(this,T,B(this,{MapboxSearch:".MapboxSearch",Results:".Results",ResultsList:".ResultsList",Label:".Label"}));let{Results:e,ResultsList:i,Label:o}=t(this,T);o.id=t(this,Oe),i.id=t(this,X),i.setAttribute("aria-labelledby",t(this,Oe)),e.addEventListener("blur",t(this,Q)),!t(this,H)&&this.input&&d(this,H,(0,fi.createPopper)(this.input,t(this,T).Results,{placement:"bottom-start"})),requestAnimationFrame(()=>{t(this,H)&&t(this,H).update()})}disconnectedCallback(){this.input=null;let{Results:e}=t(this,T);e.removeEventListener("blur",t(this,Q))}retrieve(e){return N(this,null,function*(){var n;let i=this.input;i&&(i.dataset.mapboxSuccess="true");let o=yield this.session.retrieve(e,this.options);this.retrieveFeature=(n=o.features)==null?void 0:n[0],R(this,U,he).call(this),this.dispatchEvent(new x("retrieve",o))})}focus(){document.activeElement===this.input?t(this,be).call(this):this.input.focus()}updatePopover(){t(this,H)&&t(this,H).update()}};ge=new WeakMap,H=new WeakMap,T=new WeakMap,Oe=new WeakMap,X=new WeakMap,fe=new WeakMap,ve=new WeakMap,Pe=new WeakSet,Yi=function(){if(!this.suggestions||!this.suggestions.length)return;let{Results:e,MapboxSearch:i}=t(this,T),o=this.input.getBoundingClientRect();i.style.setProperty("--width",`${o.width}px`),i.style.setProperty("display","block"),this.input.setAttribute("aria-expanded","true"),e.removeAttribute("aria-hidden"),this.selectedIndex=0},U=new WeakSet,he=function(){let{Results:e,ResultsList:i}=t(this,T);e.setAttribute("aria-hidden","true"),this.input.removeAttribute("aria-expanded"),i.removeAttribute("aria-activedescendant"),this.input.removeAttribute("aria-activedescendant")},zt=new WeakSet,_o=function(){let{ResultsList:e}=t(this,T),i=this.suggestions;if(!i||!i.length){e.innerHTML="",R(this,U,he).call(this);return}let o=Hi(e);if(i.length>o.length)for(let n=o.length;n<i.length;n++){let a=this.renderItem(n);o.push(a),a.onmouseenter=()=>{this.selectedIndex=n},e.appendChild(a)}if(i.length<o.length)for(let n=i.length;n<o.length;n++)o[n].remove();for(let n of i){let a=i.indexOf(n),l=o[a];this.fillItem(l,n,a),l.onclick=()=>{this.retrieve(n)}}},_e=new WeakMap,De=new WeakMap,je=new WeakMap,Ne=new WeakMap,Ue=new WeakMap,be=new WeakMap,Q=new WeakMap,$e=new WeakMap;window.MapboxSearchListbox=$;window.customElements.get("mapbox-search-listbox")||customElements.define("mapbox-search-listbox",$);function Xt(s){let e=s.currentTarget;(s.key===" "||s.key==="Enter")&&(s.preventDefault(),s.stopPropagation(),e.dispatchEvent(new MouseEvent("click",{bubbles:!0,composed:!0})))}var Wi=require("@mapbox/search-js-core");var Do=new Set(["street-address","address-line1","address-line2","address-line3","address-level4","address-level3","address-level2","address-level1","country","country-name","postal-code"]),jo=new Set(["off","on","true","false"]);function No(s){let e=s.parentNode;for(;e;){if(e instanceof HTMLFormElement)return e;e=e.parentNode}return null}function ze(s){let e=s||document;return Array.from(e.querySelectorAll('input[autocomplete~="address-line1"], input[autocomplete~="street-address"]'))}var Uo="section-",$o="section-default",zo="section-shipping",Xo="section-billing";function vi(s){let e=Array.from(s.querySelectorAll("[autocomplete]")).filter(o=>{let n=o.tagName.toLowerCase();return n==="input"||n==="select"||n==="textarea"}),i=[];for(let o of e){if(!Bi(o))continue;let n=o.getAttribute("autocomplete")||"";if(!n||jo.has(n))continue;let a=n.toLowerCase().split(" ");if(a.length>3)continue;let l=a[a.length-1];if(!Do.has(l))continue;a.pop();let u=$o;if(a.length){let c=a[a.length-1];c==="shipping"&&(u=zo,a.pop()),c==="billing"&&(u=Xo,a.pop())}if(a.length){let c=a[a.length-1];c.startsWith(Uo)&&(u=c)}i.push({input:o,section:u,field:l})}return i}function qi(s,e){let i=[],o=[],n=vi(s),a=null;for(let{input:l,section:u,field:c}of n){let p=i.length-1,v=!1;if(i.length?(o[p]!==u||i[p][c])&&(v=!0):v=!0,v){if(a)break;i.push({[c]:l}),o.push(u),p++}else i[p][c]=l;l===e&&(a=i[p])}return a!=null?a:{}}function bi(s,e,i){var l;let o=qi(s,e),n=[i.address_line1,i.address_line2,i.address_line3].filter(u=>Boolean(u)).join(", ");F(o["street-address"],n),F(o["address-line1"],i.address_line1||""),F(o["address-level1"],i.address_level1||""),F(o["address-level2"],i.address_level2||""),F(o["address-level3"],i.address_level3||"");let a=((l=i.metadata)==null?void 0:l.iso_3166_1)||"";if(o.country&&o.country instanceof HTMLSelectElement){let u=o.country.querySelector("option").value,c=u===u.toUpperCase();F(o.country,c?a.toUpperCase():a)}else F(o.country,a);F(o["country-name"],i.country||""),F(o["postal-code"],i.postcode||"")}function Yt(s,e){let i=qi(s,e),o={};for(let[n,a]of Object.entries(i))(a==null?void 0:a.value)&&(o[n]=a.value);return o}function Me(s){let e=[];return s["street-address"]?e.push(s["street-address"]):(e.push(s["address-line1"]||""),e.push(s["address-line2"]||""),e.push(s["address-line3"]||"")),e.push(s["address-level3"]||""),e.push(s["address-level2"]||""),e.push(s["address-level1"]||""),e.push(s["postal-code"]||""),s["country-name"]?e.push(s["country-name"]):e.push(s.country||""),e.filter(i=>Boolean(i)).join(", ")}function Wt(s,e){let i=No(e);if(!i)return;let o=(0,Wi.featureToSuggestion)(s);bi(i,e,o)}function Vi(s){var o;let e={},i=[s.properties.address_line1,s.properties.address_line2,s.properties.address_line3].filter(n=>Boolean(n)).join(", ");return e["street-address"]=i,e["address-line1"]=s.properties.address_line1,e["address-line2"]=s.properties.address_line2,e["address-line3"]=s.properties.address_line3,e["address-level1"]=s.properties.address_level1,e["address-level2"]=s.properties.address_level2,e["address-level3"]=s.properties.address_level3,e.country=(o=s.properties.metadata)==null?void 0:o.iso_3166_1,e["country-name"]=s.properties.country,e["postal-code"]=s.properties.postcode,e}function Gi(s,e){for(let[i,o]of Object.entries(s))if(e[i]!==o)return!0;return!1}function qt(s,e){if(e){let i=M(`
        <span>
          <span></span>
          <br />
          <span></span>
        </span>
      `),[o,n]=Array.from(i.querySelectorAll("span > span")),a=e.split(",");if(o.textContent=a[0].trim(),n.textContent=a.slice(1).join(",").trim(),s["address-line2"]){let l=document.createElement("span");l.textContent=s["address-line2"],i.insertBefore(l,n),i.insertBefore(document.createElement("br"),n)}if(s["address-line3"]){let l=document.createElement("span");l.textContent=s["address-line3"],i.insertBefore(l,n),i.insertBefore(document.createElement("br"),n)}return i}else{let i=s["street-address"]||s["address-line1"]||"",o=s["address-line2"],n=s["address-line3"],a=[s["address-level4"]||"",s["address-level3"]||"",s["address-level2"]||"",`${s["address-level1"]||""} ${s["postal-code"]||""}`,s.country||s["country-name"]||""].filter(Boolean).join(", "),u=[i,o,n,a].filter(Boolean).map(p=>`<span>${p}</span>`).join("<br />");return M(`
        <span>${u}</span>
      `)}}var Ki=require("@mapbox/search-js-core"),Zi=class{constructor(){this.feedbackEnabled=!0;this.autofillSessionToken=new Ki.SessionToken;this.autofillSessionEnabled=!1}},b=new Zi;Object.defineProperty(b,"autofillSessionToken",{configurable:!1,writable:!1});var Yo="https://contribute-api.mapbox.com/v1",Wo="https://contribute-api-staging.tilestream.net/v1",qo="edit-suggestion";function Vt(s,e){if(!b.feedbackEnabled)return;let i=window.location.hostname,n=`${ji(i)||Ni(i)?Wo:Yo}/${qo}/address?access_token=${s}`,{originalCoordinate:a,originalAddress:l,changes:u}=e,c={action:"update",reason:"incorrect_address",location:{longitude:a[0],latitude:a[1]},userEmail:"no-reply-autofill@mapbox.com",changes:u,placeName:l};fetch(n,{method:"POST",headers:new Headers({"User-Agent":`mapbox-search-js.${Fe}.${navigator.userAgent}`,"Content-Type":"application/json"}),body:JSON.stringify(c)})}var Vo=M(`
<template>
  <div class="MapboxAddressConfirmationFeature">
    <div class="Modal" aria-modal="true" role="dialog">
      <div class="ModalHeader">
        <svg viewBox="0 0 18 18" class="Icon IconQuestion"></svg>
        <div class="ModalHeaderTitle">Did you mean?</div>
        <svg
          viewBox="0 0 18 18"
          class="Icon IconClose"
          tabindex="0"
          role="button"
          title="Close"
          aria-label="Close"
          aria-expanded="true"
        ></svg>
      </div>

      <div class="ModalAddress ModalAddressApprove"></div>
            
      <div class="ModalMap">
        <mapbox-address-minimap class="Minimap"></mapbox-address-minimap>
      </div>

      <div
        class="Button ButtonPrimary ButtonApprove"
        tabindex="0"
        role="button"
        aria-label="Yes"
      >
        Yes
      </div>
      
      <div
        class="Button ButtonSecondary ButtonReject"
        tabindex="0"
        role="button"
        aria-label="No, use the address I provided"
      >
        No, use the address I provided
      </div>

      <div class="ModalFooter">
          Your confirmation helps ensure your order is delivered correctly.
      </div>
    </div>
  </div>
</template>
`),O,Xe,xe,Ye,We,qe,Ve,Ge,Mi=class extends y{constructor(){super(...arguments);r(this,O,void 0);r(this,Xe,{});this.minimap=!1;r(this,xe,void 0);r(this,Ye,void 0);this.update=(e,i)=>{d(this,xe,e),d(this,Ye,i);let{ModalMap:o,Minimap:n,ModalAddressApprove:a}=t(this,O);if(this.minimap){if(o.removeAttribute("aria-hidden"),n.accessToken=this.accessToken,typeof this.minimap=="object"){let{defaultMapStyle:u,theme:c,mapStyleMode:p,satelliteToggle:v}=this.minimap;u&&(n.defaultMapStyle=this.minimap.defaultMapStyle),c&&(n.theme=this.minimap.theme),p&&(n.mapStyleMode=p),v!==void 0&&(n.satelliteToggle=v)}n.feature=e}else o.setAttribute("aria-hidden","true");let l=e.properties.place_name||e.properties.full_address||e.properties.address;a.innerHTML="",a.appendChild(qt(i,l))};r(this,We,()=>{this.dispatchEvent(new x("result","cancel"))});this.approve=()=>{this.dispatchEvent(new x("result","change"))};this.reject=()=>{this.dispatchEvent(new x("result","nochange")),Vt(this.accessToken,{originalCoordinate:t(this,xe).geometry.coordinates,originalAddress:t(this,xe).properties.full_address,changes:{address:Me(t(this,Ye))}})};r(this,qe,C());r(this,Ve,C());r(this,Ge,C())}get template(){return Vo}get templateStyle(){return I}get templateUserStyle(){return E(".MapboxAddressConfirmationFeature",this.theme)}get theme(){return t(this,Xe)}set theme(e){if(d(this,Xe,e),!t(this,O)||!e)return;this.updateTemplateUserStyle(E(".MapboxAddressConfirmationFeature",e));let{IconQuestion:i,IconClose:o}=t(this,O);i.innerHTML=w("question",e),o.innerHTML=w("close",e)}connectedCallback(){super.connectedCallback(),d(this,O,B(this,{MapboxAddressConfirmationFeature:".MapboxAddressConfirmationFeature",Modal:".Modal",ModalHeaderTitle:".ModalHeaderTitle",ModalMap:".ModalMap",Minimap:".Minimap",IconQuestion:".IconQuestion",IconClose:".IconClose",ButtonApprove:".ButtonApprove",ButtonReject:".ButtonReject",ModalAddressApprove:".ModalAddressApprove"}));let{Modal:e,ModalHeaderTitle:i,IconClose:o,ButtonApprove:n,ButtonReject:a,ModalAddressApprove:l}=t(this,O);e.setAttribute("aria-labelledby",t(this,Ve)),e.setAttribute("aria-describedby",t(this,Ge)),o.setAttribute("aria-controls",t(this,qe)),e.id=t(this,qe),i.id=t(this,Ve),l.id=t(this,Ge);let u=Array.from(this.querySelectorAll('[role="button"]'));for(let p of u)p.addEventListener("keydown",Xt);o.addEventListener("click",t(this,We)),n.addEventListener("click",this.approve),a.addEventListener("click",this.reject);let c=this.theme;if(c){let{IconQuestion:p,IconClose:v}=t(this,O);p.innerHTML=w("question",c),v.innerHTML=w("close",c)}}disconnectedCallback(){let{IconClose:e,ButtonApprove:i}=t(this,O);e.removeEventListener("click",t(this,We)),i.removeEventListener("click",this.approve)}};O=new WeakMap,Xe=new WeakMap,xe=new WeakMap,Ye=new WeakMap,We=new WeakMap,qe=new WeakMap,Ve=new WeakMap,Ge=new WeakMap;window.MapboxAddressConfirmationFeature=Mi;window.customElements.get("mapbox-address-confirmation-feature")||customElements.define("mapbox-address-confirmation-feature",Mi);var Go=M(`
<template>
  <div class="MapboxAddressConfirmationNoFeature">
    <div class="Modal" aria-modal="true" role="dialog">
      <div class="ModalHeader">
        <svg viewBox="0 0 18 18" class="Icon IconQuestion"></svg>
        <div class="ModalHeaderTitle">Confirm address</div>
        <svg
          viewBox="0 0 18 18"
          class="Icon IconClose"
          tabindex="0"
          role="button"
          title="Close"
          aria-label="Close"
          aria-expanded="true"
        ></svg>
      </div>
      <div class="ModalDescription">
        We couldn't verify this address. Please check that your information is correct before continuing.
      </div>
      <br />
      <div class="ModalSubheader">
        You entered
      </div>
      <div class="ModalAddress"></div>
      <div
        class="Button ButtonPrimary"
        tabindex="0"
        role="button"
        aria-label="Use the address I provided"
      >
        Use the address I provided
      </div>
    </div>
  </div>
</template>
`),P,Ke,Ze,Qe,Je,et,xi=class extends y{constructor(){super(...arguments);r(this,P,void 0);r(this,Ke,{});this.update=e=>{let{ModalAddress:i}=t(this,P);i.innerHTML="",i.appendChild(qt(e))};r(this,Ze,()=>{this.dispatchEvent(new x("result","cancel"))});this.reject=()=>{this.dispatchEvent(new x("result","nochange"))};r(this,Qe,C());r(this,Je,C());r(this,et,C())}get template(){return Go}get templateStyle(){return I}get templateUserStyle(){return E(".MapboxAddressConfirmationNoFeature",this.theme)}get theme(){return t(this,Ke)}set theme(e){if(d(this,Ke,e),!t(this,P)||!e)return;this.updateTemplateUserStyle(E(".MapboxAddressConfirmationNoFeature",e));let{IconQuestion:i,IconClose:o}=t(this,P);i.innerHTML=w("question",e),o.innerHTML=w("close",e)}connectedCallback(){super.connectedCallback(),d(this,P,B(this,{Modal:".Modal",ModalHeaderTitle:".ModalHeaderTitle",IconQuestion:".IconQuestion",IconClose:".IconClose",ModalAddress:".ModalAddress",ButtonReject:".Button"}));let{Modal:e,ModalHeaderTitle:i,IconClose:o,ModalAddress:n,ButtonReject:a}=t(this,P);e.setAttribute("aria-labelledby",t(this,Je)),e.setAttribute("aria-describedby",t(this,et)),o.setAttribute("aria-controls",t(this,Qe)),e.id=t(this,Qe),i.id=t(this,Je),n.id=t(this,et);let l=Array.from(this.querySelectorAll('[role="button"]'));for(let c of l)c.addEventListener("keydown",Xt);o.addEventListener("click",t(this,Ze)),a.addEventListener("click",this.reject);let u=this.theme;if(u){let{IconQuestion:c,IconClose:p}=t(this,P);c.innerHTML=w("question",u),p.innerHTML=w("close",u)}}disconnectedCallback(){let{IconClose:e,ButtonReject:i}=t(this,P);e.removeEventListener("click",t(this,Ze)),i.removeEventListener("click",this.reject)}};P=new WeakMap,Ke=new WeakMap,Ze=new WeakMap,Qe=new WeakMap,Je=new WeakMap,et=new WeakMap;window.MapboxAddressConfirmationNoFeature=xi;window.customElements.get("mapbox-address-confirmation-no-feature")||customElements.define("mapbox-address-confirmation-no-feature",xi);var Gt=require("@mapbox/search-js-core"),Ei=jt(require("no-scroll")),Qi=require("focus-trap");var Ko=M(`
<template>
  <div class="MapboxAddressConfirmation" aria-hidden="true">
    <mapbox-address-confirmation-feature class="ContentFeature"></mapbox-address-confirmation-feature>
    <mapbox-address-confirmation-no-feature class="ContentNoFeature"></mapbox-address-confirmation-no-feature>
  </div>
</template>
`),tt,L,J,it,ee=class extends y{constructor(){super(...arguments);r(this,tt,!1);r(this,L,void 0);r(this,J,void 0);r(this,it,{})}get template(){return Ko}get templateStyle(){return I}get templateUserStyle(){return E(".MapboxAddressConfirmation",this.theme)}get theme(){return t(this,it)}set theme(e){if(d(this,it,e),!t(this,L)||!e)return;this.updateTemplateUserStyle(E(".MapboxAddressConfirmation",e));let{ContentFeature:i,ContentNoFeature:o}=t(this,L);i.theme=e,o.theme=e}connectedCallback(){super.connectedCallback(),d(this,L,B(this,{MapboxAddressConfirmation:".MapboxAddressConfirmation",ContentFeature:".ContentFeature",ContentNoFeature:".ContentNoFeature"}));let{MapboxAddressConfirmation:e}=t(this,L);e.setAttribute("aria-hidden","true");let i=this.theme;if(i){let{ContentFeature:o,ContentNoFeature:n}=t(this,L);o.theme=i,n.theme=i}}disconnectedCallback(){d(this,J,null)}hide(){var i;if(d(this,tt,!1),!t(this,L))return;let{MapboxAddressConfirmation:e}=t(this,L);e.setAttribute("aria-hidden","true"),(i=t(this,J))==null||i.deactivate(),Ei.default.off()}show(e,i,o){return N(this,null,function*(){var j;if(!t(this,L))return{type:"cancel"};let{MapboxAddressConfirmation:n,ContentFeature:a,ContentNoFeature:l}=t(this,L),{accessToken:u,minimap:c=!1,theme:p}=i;this.theme=p,o?(a.removeAttribute("aria-hidden"),l.setAttribute("aria-hidden","true"),a.minimap=c,a.accessToken=u,a.update(o,e)):(a.setAttribute("aria-hidden","true"),l.removeAttribute("aria-hidden"),l.update(e)),d(this,tt,!0),n.removeAttribute("aria-hidden"),Ei.default.on();let v=o?a:l;return d(this,J,(0,Qi.createFocusTrap)(n,{fallbackFocus:v,escapeDeactivates:()=>(this.hide(),!0)})),(j=t(this,J))==null||j.activate(),new Promise(k=>{let A=v,ue=mo=>{A.removeEventListener("result",ue);let Si=mo.detail;this.hide(),k(Si==="change"?{type:"change",feature:o}:{type:Si})};A.addEventListener("result",ue)})})}tryShow(e,i){return N(this,null,function*(){if(!t(this,L))return{type:"cancel"};let{accessToken:o,options:n={}}=i,a=new Gt.MapboxAutofill(h({accessToken:o},n)),l=Me(e),c=(yield a.retrieve(l,{sessionToken:b.autofillSessionToken})).features[0];if(c){let p=j=>j.properties.match_code.confidence===Gt.AutofillMatchCodeConfidence.exact,{skipConfirmModal:v=p}=i;if(v(c))return{type:"nochange"}}return yield this.show(e,i,c)})}};tt=new WeakMap,L=new WeakMap,J=new WeakMap,it=new WeakMap;window.MapboxAddressConfirmation=ee;window.customElements.get("mapbox-address-confirmation")||customElements.define("mapbox-address-confirmation",ee);var Zt=require("@mapbox/search-js-core");var te,Kt,ie,f,ot,st,nt,rt,at,Ee=class extends y{constructor(){super(...arguments);r(this,te,new Zt.MapboxAutofill);r(this,Kt,new Zt.SearchSession(t(this,te)));r(this,ie,void 0);r(this,f,new $);r(this,ot,e=>{this.dispatchEvent(e.clone())});r(this,st,e=>{this.dispatchEvent(e.clone())});r(this,nt,e=>{if(this.dispatchEvent(e.clone()),!t(this,ie))return;let i=e.detail;!i||!i.features||!i.features.length||Wt(i.features[0],t(this,ie))});r(this,rt,()=>{var e;try{let i=(e=this.querySelector("input"))!=null?e:null;d(this,ie,i),t(this,f).input=i}catch(i){d(this,ie,null),t(this,f).input=null,console.error(i.message||i)}});r(this,at,new MutationObserver(t(this,rt)))}get accessToken(){return t(this,te).accessToken}set accessToken(e){t(this,te).accessToken=e}get options(){return t(this,f).options}set options(e){t(this,f).options=e}get theme(){return t(this,f).theme}set theme(e){t(this,f).theme=e}connectedCallback(){super.connectedCallback(),b.autofillSessionEnabled=!0,t(this,f).session=t(this,Kt),t(this,f).session.sessionToken=b.autofillSessionToken,t(this,f).addEventListener("suggest",t(this,ot)),t(this,f).addEventListener("suggesterror",t(this,st)),t(this,f).addEventListener("retrieve",t(this,nt)),document.body.appendChild(t(this,f)),t(this,at).observe(this,{subtree:!0,childList:!0}),t(this,rt).call(this)}disconnectedCallback(){t(this,f).remove(),t(this,f).removeEventListener("suggest",t(this,ot)),t(this,f).removeEventListener("suggesterror",t(this,st)),t(this,f).removeEventListener("retrieve",t(this,nt)),t(this,at).disconnect()}attributeChangedCallback(e,i,o){if(e==="access-token"){t(this,te).accessToken=o;return}if(e==="theme"){this.theme=$t(o);return}let n=e.split("-").join("_");o||delete t(this,f).options[n],t(this,f).options[n]=o}focus(){t(this,f).focus()}};te=new WeakMap,Kt=new WeakMap,ie=new WeakMap,f=new WeakMap,ot=new WeakMap,st=new WeakMap,nt=new WeakMap,rt=new WeakMap,at=new WeakMap,Ee.observedAttributes=["access-token","theme","css-text","language","country","bbox","limit","proximity"];window.MapboxAddressAutofill=Ee;window.customElements.get("mapbox-address-autofill")||customElements.define("mapbox-address-autofill",Ee);var z=require("@mapbox/search-js-core"),Ji=jt(require("@turf/bbox")),eo=jt(require("@turf/bbox-polygon"));var Zo=9,Qo=M(`
<template>
  <input class="Input" type="text" />
</template>
`),oe,Qt,Y,W,g,lt,dt,ct,Jt,ut,Te=class extends y{constructor(){super(...arguments);r(this,oe,new z.MapboxSearch({}));r(this,Qt,new z.SearchSession(t(this,oe)));r(this,Y,null);r(this,W,void 0);r(this,g,new $);r(this,lt,e=>{this.dispatchEvent(e.clone())});r(this,dt,e=>{this.dispatchEvent(e.clone())});r(this,ct,e=>N(this,null,function*(){var c;this.dispatchEvent(e.clone());let i=e.detail;if(!i||!i.features.length)return;let o=(0,z.featureToSuggestion)(i.features[0]);t(this,W).value=o.feature_name;let n=t(this,Y);if(!n)return;let a=i.features;if(a.length===1){let p=a[0],v=(c=p.properties.place_type)==null?void 0:c[0],j=p.bbox;if(j)n.flyTo(pi(n,z.LngLatBounds.convert(j).toFlatArray()));else{let k=p.geometry.coordinates,A=Fi(v);n.flyTo({center:k,zoom:A,speed:ui})}return}let l=i.features.map(p=>p.bbox?(0,eo.default)(z.LngLatBounds.convert(p.bbox).toFlatArray()):p),u=(0,Ji.default)({type:"FeatureCollection",features:l});n.flyTo(pi(n,u))}));r(this,Jt,e=>{let i=new x("input");Object.assign(i,h({},e)),this.dispatchEvent(i)});r(this,ut,()=>{let e=t(this,Y),i=h({},t(this,g).options);if(e.getZoom()<=Zo){delete i.proximity,t(this,g).options=i;return}let o=e.getCenter();t(this,g).options=pe(h({},i),{proximity:o})})}get accessToken(){return t(this,oe).accessToken}set accessToken(e){t(this,oe).accessToken=e}get value(){return t(this,W).value}set value(e){t(this,W).value=e}get template(){return Qo}get templateStyle(){return I}get templateUserStyle(){return E(".Input",t(this,g).theme)}get options(){return t(this,g).options}set options(e){t(this,g).options=e}get theme(){return t(this,g).theme}set theme(e){t(this,g).theme=e,!!t(this,W)&&(this.updateTemplateUserStyle(E(".Input",e)),t(this,g).updatePopover())}connectedCallback(){super.connectedCallback();let e=this.querySelector(".Input");e.addEventListener("input",t(this,Jt)),d(this,W,e),t(this,g).session=t(this,Qt),t(this,g).input=e,t(this,g).addEventListener("suggest",t(this,lt)),t(this,g).addEventListener("suggesterror",t(this,dt)),t(this,g).addEventListener("retrieve",t(this,ct)),document.body.appendChild(t(this,g))}disconnectedCallback(){t(this,g).remove(),t(this,g).input=null,t(this,g).removeEventListener("suggest",t(this,lt)),t(this,g).removeEventListener("suggesterror",t(this,dt)),t(this,g).removeEventListener("retrieve",t(this,ct))}attributeChangedCallback(e,i,o){if(e==="access-token"){t(this,oe).accessToken=o;return}if(e==="theme"){this.theme=$t(o);return}let n=e.split("-").join("_");o||delete t(this,g).options[n],t(this,g).options[n]=o}focus(){t(this,g).focus()}bindMap(e){t(this,Y)&&t(this,Y).off("moveend",t(this,ut)),e&&e.on("moveend",t(this,ut)),d(this,Y,e)}unbindMap(){this.bindMap(null)}onAdd(e){this.bindMap(e),this.remove();let i=document.createElement("div");return i.className="mapboxgl-ctrl",i.style.width="300px",i.appendChild(this),i}onRemove(){this.remove(),this.unbindMap()}getDefaultPosition(){return"top-right"}};oe=new WeakMap,Qt=new WeakMap,Y=new WeakMap,W=new WeakMap,g=new WeakMap,lt=new WeakMap,dt=new WeakMap,ct=new WeakMap,Jt=new WeakMap,ut=new WeakMap,Te.observedAttributes=["access-token","theme","language","country","bbox","limit","navigation-profile","origin","proximity","eta-type","types"];window.MapboxSearchBox=Te;window.customElements.get("mapbox-search-box")||customElements.define("mapbox-search-box",Te);var ro=require("@mapbox/search-js-core");var oo=jt(require("@mapbox/sphericalmercator"));var to=new oo.default({size:512,antimeridian:!0}),re=1280;function io(s,e){let{width:i,height:o}=Nt(s,!0);switch(e){case"center":return[0,0];case"top":return[0,o/2];case"bottom":return[0,-1*o/2];case"left":return[i/2,0];case"right":return[-1*i/2,0];case"top-left":return[i/2,o/2];case"top-right":return[-1*i/2,o/2];case"bottom-left":return[i/2,-1*o/2];case"bottom-right":return[-1*i/2,-1*o/2]}}var pt,ei,se,mt,ht,ti,gt,ft,ii,vt,bt,ne,oi,Ti=class{constructor(e,i,o,n,a){r(this,pt,void 0);r(this,ei,()=>{[this.anchorOffsetX,this.anchorOffsetY]=io(this.markerElement,this.anchor),this.markerTransform={anchorX:this.anchorOffsetX,anchorY:this.anchorOffsetY}});r(this,se,{anchorX:0,anchorY:0,globalX:0,globalY:0});r(this,mt,!1);r(this,ht,void 0);r(this,ti,e=>{!this.isActive||(e.preventDefault(),e.stopPropagation(),t(this,ne).call(this,e),window.addEventListener("pointermove",t(this,ft)),window.addEventListener("pointerup",t(this,gt)))});r(this,gt,()=>{window.removeEventListener("pointermove",t(this,ft)),window.removeEventListener("pointerup",t(this,gt))});r(this,ft,e=>{e.preventDefault(),e.stopPropagation();let i=this.curPointerXPos-e.pageX,o=this.curPointerYPos-e.pageY;this.markerDeltaX+=i,this.markerDeltaY-=o,this.markerDeltaX=Math.max(Math.min(this.imgWidth/2,this.markerDeltaX),this.imgWidth/2*-1),this.markerDeltaY=Math.max(Math.min(this.imgHeight/2,this.markerDeltaY),this.imgHeight/2*-1);let n=this.imgCenterPx[0]-this.imgCenterAdjustedPx[0],a=this.imgCenterPx[1]-this.imgCenterAdjustedPx[1],l=this.markerDeltaX-n,u=this.markerDeltaY+a;this.markerTransform={globalX:l,globalY:u},t(this,ne).call(this,e)});r(this,ii,e=>{!this.isActive||(e.preventDefault(),e.stopPropagation(),t(this,ne).call(this,e),window.addEventListener("pointermove",t(this,bt)),window.addEventListener("pointerup",t(this,vt)))});r(this,vt,()=>{window.removeEventListener("pointermove",t(this,bt)),window.removeEventListener("pointerup",t(this,vt))});r(this,bt,e=>{e.preventDefault();let i=Math.round(this.imgContainerElement.scrollTop+(this.curPointerYPos-e.pageY));i=Math.max(Math.min(this.imgHeight-this.imgContainerElement.clientHeight,i),0);let o=Math.round(this.imgContainerElement.scrollLeft+(this.curPointerXPos-e.pageX));o=Math.max(Math.min(this.imgWidth-this.imgContainerElement.clientWidth,o),0),this.imgContainerElement.scrollTop=i,this.imgContainerElement.scrollLeft=o;let n=Math.round(o-(this.imgWidth-this.imgContainerElement.clientWidth)/2),a=Math.round((this.imgHeight-this.imgContainerElement.clientHeight)/2-i);if(this.imgCenterAdjustedPx=[this.imgCenterPx[0]+n,this.imgCenterPx[1]-a],!this.keepMarkerCentered){let l=this.markerDeltaX+n,u=this.markerDeltaY+a;this.markerTransform={globalX:l,globalY:u}}t(this,ne).call(this,e)});r(this,ne,e=>{this.curPointerXPos=e.pageX,this.curPointerYPos=e.pageY});r(this,oi,()=>{let{anchorX:e,anchorY:i,globalX:o,globalY:n}=t(this,se),a=e-o,l=i+n;this.markerElement.style.transform=`translate(calc(-50% + ${a}px), calc(-50% + ${l}px))`});this.reCenter=()=>{let e=(this.imgHeight-this.imgContainerElement.clientHeight)/2,i=(this.imgWidth-this.imgContainerElement.clientWidth)/2;this.imgContainerElement.scrollTop=e,this.imgContainerElement.scrollLeft=i,this.imgCenterAdjustedPx=this.imgCenterPx,this.markerDeltaX=this.markerDeltaY=0,this.markerTransform={globalX:0,globalY:0}};this.markerElement=i,this.imgContainerElement=e,this.keepMarkerCentered=o,this.zoom=n,this.anchor=a,this.curPointerXPos=0,this.curPointerYPos=0,this.markerDeltaX=0,this.markerDeltaY=0,this.imgContainerElement.addEventListener("pointerdown",t(this,ii)),this.keepMarkerCentered||this.markerElement.addEventListener("pointerdown",t(this,ti)),new ResizeObserver(t(this,ei)).observe(this.markerElement)}get anchor(){return t(this,pt)}set anchor(e){d(this,pt,e),[this.anchorOffsetX,this.anchorOffsetY]=io(this.markerElement,e),this.markerTransform={anchorX:this.anchorOffsetX,anchorY:this.anchorOffsetY}}get markerTransform(){return t(this,se)}set markerTransform(e){d(this,se,h(h({},t(this,se)),e)),t(this,oi).call(this)}get isActive(){return t(this,mt)}set isActive(e){this.imgContainerElement.style.touchAction=e?"none":"",d(this,mt,e)}get imgHeight(){return Math.min(this.imgContainerElement.clientHeight*2,re)}get imgWidth(){return Math.min(this.imgContainerElement.clientWidth*2,re)}get coordinate(){let e=this.keepMarkerCentered?this.imgCenterAdjustedPx:[this.imgCenterPx[0]-this.markerDeltaX,this.imgCenterPx[1]+this.markerDeltaY];if(G(e,this.imgCenterPx))return t(this,ht);{let i=to.ll(e,this.zoom);return[mi(i[0],6),mi(i[1],6)]}}set coordinate(e){d(this,ht,e),this.imgCenterPx=this.imgCenterAdjustedPx=to.px(e,this.zoom)}};pt=new WeakMap,ei=new WeakMap,se=new WeakMap,mt=new WeakMap,ht=new WeakMap,ti=new WeakMap,gt=new WeakMap,ft=new WeakMap,ii=new WeakMap,vt=new WeakMap,bt=new WeakMap,ne=new WeakMap,oi=new WeakMap;var so=`<svg width="88" height="23" viewBox="0 0 88 23" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" fill-rule="evenodd">
    <defs>
        <path id="logo" d="M11.5 2.25c5.105 0 9.25 4.145 9.25 9.25s-4.145 9.25-9.25 9.25-9.25-4.145-9.25-9.25 4.145-9.25 9.25-9.25zM6.997 15.983c-.051-.338-.828-5.802 2.233-8.873a4.395 4.395 0 013.13-1.28c1.27 0 2.49.51 3.39 1.42.91.9 1.42 2.12 1.42 3.39 0 1.18-.449 2.301-1.28 3.13C12.72 16.93 7 16 7 16l-.003-.017zM15.3 10.5l-2 .8-.8 2-.8-2-2-.8 2-.8.8-2 .8 2 2 .8z" />
        <path id="text" d="M50.63 8c.13 0 .23.1.23.23V9c.7-.76 1.7-1.18 2.73-1.18 2.17 0 3.95 1.85 3.95 4.17s-1.77 4.19-3.94 4.19c-1.04 0-2.03-.43-2.74-1.18v3.77c0 .13-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V8.23c0-.12.1-.23.23-.23h1.4zm-3.86.01c.01 0 .01 0 .01-.01.13 0 .22.1.22.22v7.55c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V15c-.7.76-1.69 1.19-2.73 1.19-2.17 0-3.94-1.87-3.94-4.19 0-2.32 1.77-4.19 3.94-4.19 1.03 0 2.02.43 2.73 1.18v-.75c0-.12.1-.23.23-.23h1.4zm26.375-.19a4.24 4.24 0 00-4.16 3.29c-.13.59-.13 1.19 0 1.77a4.233 4.233 0 004.17 3.3c2.35 0 4.26-1.87 4.26-4.19 0-2.32-1.9-4.17-4.27-4.17zM60.63 5c.13 0 .23.1.23.23v3.76c.7-.76 1.7-1.18 2.73-1.18 1.88 0 3.45 1.4 3.84 3.28.13.59.13 1.2 0 1.8-.39 1.88-1.96 3.29-3.84 3.29-1.03 0-2.02-.43-2.73-1.18v.77c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V5.23c0-.12.1-.23.23-.23h1.4zm-34 11h-1.4c-.13 0-.23-.11-.23-.23V8.22c.01-.13.1-.22.23-.22h1.4c.13 0 .22.11.23.22v.68c.5-.68 1.3-1.09 2.16-1.1h.03c1.09 0 2.09.6 2.6 1.55.45-.95 1.4-1.55 2.44-1.56 1.62 0 2.93 1.25 2.9 2.78l.03 5.2c0 .13-.1.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.8 0-1.46.7-1.59 1.62l.01 4.68c0 .13-.11.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.85 0-1.54.79-1.6 1.8v4.5c0 .13-.1.23-.23.23zm53.615 0h-1.61c-.04 0-.08-.01-.12-.03-.09-.06-.13-.19-.06-.28l2.43-3.71-2.39-3.65a.213.213 0 01-.03-.12c0-.12.09-.21.21-.21h1.61c.13 0 .24.06.3.17l1.41 2.37 1.4-2.37a.34.34 0 01.3-.17h1.6c.04 0 .08.01.12.03.09.06.13.19.06.28l-2.37 3.65 2.43 3.7c0 .05.01.09.01.13 0 .12-.09.21-.21.21h-1.61c-.13 0-.24-.06-.3-.17l-1.44-2.42-1.44 2.42a.34.34 0 01-.3.17zm-7.12-1.49c-1.33 0-2.42-1.12-2.42-2.51 0-1.39 1.08-2.52 2.42-2.52 1.33 0 2.42 1.12 2.42 2.51 0 1.39-1.08 2.51-2.42 2.52zm-19.865 0c-1.32 0-2.39-1.11-2.42-2.48v-.07c.02-1.38 1.09-2.49 2.4-2.49 1.32 0 2.41 1.12 2.41 2.51 0 1.39-1.07 2.52-2.39 2.53zm-8.11-2.48c-.01 1.37-1.09 2.47-2.41 2.47s-2.42-1.12-2.42-2.51c0-1.39 1.08-2.52 2.4-2.52 1.33 0 2.39 1.11 2.41 2.48l.02.08zm18.12 2.47c-1.32 0-2.39-1.11-2.41-2.48v-.06c.02-1.38 1.09-2.48 2.41-2.48s2.42 1.12 2.42 2.51c0 1.39-1.09 2.51-2.42 2.51z" />
    </defs>
    <mask id="clip">
        <rect x="0" y="0" width="100%" height="100%" fill="white" />
        <use xlink:href="#logo" />
        <use xlink:href="#text" />
    </mask>

    <g id="outline" opacity="0.3" stroke="#000" stroke-width="3">
        <circle mask="url(#clip)" cx="11.5" cy="11.5" r="9.25" />
        <use xlink:href="#text" mask="url(#clip)" />
    </g>
    <g id="fill" opacity="0.9" fill="#fff" >
        <use xlink:href="#logo" />
        <use xlink:href="#text" />
    </g>
</svg>
`;var no=16,es=M(`
<template>
  <div class="MapboxAddressMinimap" aria-hidden="true">
    <div class="MinimapImageContainer">
      <img class="MinimapImage" draggable="false"></img>
      <div class="MinimapInnerFrame">
        <div class="MinimapMarker"></div>
        <div class="MinimapAttribution">
          <div class="MinimapAttributionLogo">
            <a target="_blank" rel="noopener nofollow" href="https://www.mapbox.com/" aria-label="Mapbox logo">
              ${so}
            </a>
          </div>
          <div class="MinimapAttributionText">
            <a target="_blank" href='https://www.mapbox.com/about/maps/'>\xA9 Mapbox</a><a target="_blank" href='http://www.openstreetmap.org/copyright'>\xA9 OpenStreetMap</a>
          </div>
        </div>
      </div>
    </div>
  </div>
</template>
`),ts=M(`
<template>
  <button type="button" class="MinimapStyleToggle"></button>
</template>
`),is=M(`
<template>
  <div class="MinimapFooter">Adjust the marker on the map if it doesn't precisely match your location. This helps your delivery reach you faster.</div>
</template>
`),os=M(`
<template>
  <div class="MinimapEditButtons">
    <div class="Button ButtonPrimary MinimapButtonAdjust">Adjust pin</div>
    <div class="Button ButtonPrimary MinimapButtonSave" aria-hidden="true">Save</div>
    <div class="Button MinimapButtonCancel" aria-hidden="true">Cancel</div>
  </div>
</template>
`),Mt,ae,ye,_,q,V,le,m,S,xt,Et,Tt,de,yt,St,Se,At,Ct,Lt,kt,si,ni,wt,Ae,Ce,It,Ht,ri,Rt,ai,Le=class extends y{constructor(){super(...arguments);r(this,Mt,!1);this.keepMarkerCentered=!1;this.markerAnchor="bottom";r(this,ae,!1);r(this,ye,!1);r(this,_,void 0);r(this,q,"");r(this,V,void 0);r(this,le,void 0);r(this,m,void 0);r(this,S,void 0);r(this,xt,void 0);r(this,Et,{});r(this,Tt,!1);r(this,de,"default");r(this,yt,["mapbox","streets-v11"]);r(this,St,void 0);r(this,Se,()=>{let{ImageContainer:e,ButtonAdjust:i,ButtonSave:o,ButtonCancel:n}=t(this,m);t(this,ae)?(e.classList.add(`${this.dataset.seed}--draggable`),t(this,S).isActive=!0,i.setAttribute("aria-hidden","true"),o.removeAttribute("aria-hidden"),n.removeAttribute("aria-hidden")):(e.classList.remove(`${this.dataset.seed}--draggable`),t(this,S).isActive=!1,i.removeAttribute("aria-hidden"),o.setAttribute("aria-hidden","true"),n.setAttribute("aria-hidden","true"))});r(this,At,()=>{d(this,ae,!0),t(this,Se).call(this)});r(this,Ct,()=>{if(this.feature.properties.full_address&&!G(this.feature.geometry.coordinates,t(this,S).coordinate)){let[e,i]=t(this,S).coordinate;Vt(this.accessToken,{originalCoordinate:this.feature.geometry.coordinates,originalAddress:this.feature.properties.full_address,changes:{location:{longitude:e,latitude:i}}})}this.onSaveMarkerLocation&&this.onSaveMarkerLocation(t(this,S).coordinate),d(this,ae,!1),t(this,Se).call(this)});r(this,Lt,()=>{t(this,S).reCenter(),d(this,ae,!1),t(this,Se).call(this)});r(this,kt,()=>{this.mapStyleMode=this.mapStyleMode==="default"?"satellite":"default"});r(this,si,()=>{t(this,ye)||t(this,S).reCenter(),d(this,ye,!0)});r(this,ni,()=>{d(this,ye,!1)});r(this,wt,e=>{if(t(this,V)===0||t(this,le)===0)return"";let[i,o]=this.defaultMapStyle,n=Ut(i,o),a=this.mapStyleMode==="default"?n:Oi,l=Pi+b.autofillSessionToken.toString(),u=a+ro.LngLat.convert(e).toArray().join(",")+","+no+",0/"+Math.min(t(this,V)*2,re)+"x"+Math.min(t(this,le)*2,re)+"?access_token="+this.accessToken+"&attribution=false&logo=false";return b.autofillSessionEnabled&&(u+=`&sku=${l}`),u});r(this,Ae,()=>{if(t(this,_)){let e=t(this,_).geometry.coordinates;d(this,q,t(this,wt).call(this,e));let{Image:i}=t(this,m);i.src=t(this,q)}});r(this,Ce,e=>`url("${Xi(e==="default"?"styleToggleDefault":"styleToggleSatellite",this.theme)}")`);r(this,It,()=>{let{MapboxAddressMinimap:e,ImageContainer:i}=t(this,m),{width:o,height:n}=Nt(this.container);d(this,V,Math.min(o,re)),d(this,le,Math.min(n,re)),e.style.setProperty("width",`${t(this,V)}px`),i.style.setProperty("height",`${t(this,le)}px`),i.style.setProperty("width",`${t(this,V)}px`),t(this,Ae).call(this)});r(this,Ht,()=>{if(this.querySelector(".MinimapFooter"))return;let i=this.prepareTemplate(is),o=this.querySelector(".MapboxAddressMinimap");if(!o||(o.appendChild(i),this.querySelector(".MinimapEditButtons")))return;let a=this.prepareTemplate(os);this.querySelector(".MinimapInnerFrame").appendChild(a),d(this,m,pe(h({},t(this,m)),{EditButtons:this.querySelector(".MinimapEditButtons"),ButtonAdjust:this.querySelector(".MinimapButtonAdjust"),ButtonSave:this.querySelector(".MinimapButtonSave"),ButtonCancel:this.querySelector(".MinimapButtonCancel")}));let{ButtonAdjust:u,ButtonSave:c,ButtonCancel:p}=t(this,m);u.addEventListener("click",t(this,At)),c.addEventListener("click",t(this,Ct)),p.addEventListener("click",t(this,Lt))});r(this,ri,()=>{if(!t(this,m))return;let{EditButtons:e,ButtonAdjust:i,ButtonSave:o,ButtonCancel:n}=t(this,m),a=this.querySelector(".MinimapFooter");a==null||a.remove(),e==null||e.remove(),i&&(i.remove(),i.removeEventListener("click",t(this,At))),o&&(o.remove(),o.removeEventListener("click",t(this,Ct))),n&&(n.remove(),n.removeEventListener("click",t(this,Lt))),delete t(this,m).EditButtons,delete t(this,m).ButtonAdjust,delete t(this,m).ButtonSave,delete t(this,m).ButtonCancel});r(this,Rt,()=>{if(this.querySelector(".MinimapStyleToggle"))return;let i=this.prepareTemplate(ts),o=this.querySelector(".MinimapInnerFrame");!o||(o.appendChild(i),t(this,m).MapStyleToggle=i,i.addEventListener("click",t(this,kt)),i.style.backgroundImage=t(this,Ce).call(this,this.mapStyleMode==="default"?"satellite":"default"),i.setAttribute("title",`Switch to ${this.mapStyleMode==="default"?"Satellite":"Default"}`))});r(this,ai,()=>{if(!t(this,m))return;let{MapStyleToggle:e}=t(this,m);!e||(e.remove(),e.removeEventListener("click",t(this,kt)),delete t(this,m).MapStyleToggle)})}get canAdjustMarker(){return t(this,Mt)}set canAdjustMarker(e){d(this,Mt,e),e?t(this,Ht).call(this):t(this,ri).call(this)}get accessToken(){return t(this,xt)||b.accessToken}set accessToken(e){d(this,xt,e)}get feature(){return t(this,_)}set feature(e){d(this,_,e),e?this.show():this.hide()}get template(){return es}get templateStyle(){return I}get templateUserStyle(){return E(".MapboxAddressMinimap",this.theme)}get satelliteToggle(){return t(this,Tt)}set satelliteToggle(e){d(this,Tt,e),e?t(this,Rt).call(this):t(this,ai).call(this)}get theme(){return t(this,Et)}set theme(e){if(d(this,Et,e),!t(this,m)||!e)return;this.updateTemplateUserStyle(E(".MapboxAddressMinimap",e));let{Marker:i,MapStyleToggle:o}=t(this,m);i.innerHTML=w("marker",e),o&&(o.style.backgroundImage=t(this,Ce).call(this,this.mapStyleMode==="default"?"satellite":"default"))}get mapStyleMode(){return t(this,de)}set mapStyleMode(e){let i=t(this,de);if(d(this,de,e),!t(this,m))return;let{MapStyleToggle:o}=t(this,m);!o||(o.style.backgroundImage=t(this,Ce).call(this,i),o.setAttribute("title",`Switch to ${i==="satellite"?"Satellite":"Default"}`),t(this,Ae).call(this))}get defaultMapStyle(){return t(this,yt)}set defaultMapStyle(e){d(this,yt,e),t(this,Ae).call(this)}get container(){return t(this,St)}set container(e){e&&(e.style.position="relative",d(this,St,e))}show(){if(!t(this,_))return;let e=t(this,_).geometry.coordinates;t(this,S).coordinate=e,d(this,q,t(this,wt).call(this,e));let{MapboxAddressMinimap:i,Image:o}=t(this,m);o.src=t(this,q),i.removeAttribute("aria-hidden")}hide(){let{MapboxAddressMinimap:e}=t(this,m);e.setAttribute("aria-hidden","true")}connectedCallback(){super.connectedCallback(),d(this,m,B(this,{MapboxAddressMinimap:".MapboxAddressMinimap",ImageContainer:".MinimapImageContainer",Image:".MinimapImage",Marker:".MinimapMarker",MapStyleToggle:".MinimapStyleToggle",EditButtons:".MinimapEditButtons",ButtonAdjust:".MinimapButtonAdjust",ButtonSave:".MinimapButtonSave",ButtonCancel:".MinimapButtonCancel"})),this.mapStyleMode=t(this,de),this.theme=h({},this.theme),this.canAdjustMarker&&t(this,Ht).call(this),this.satelliteToggle&&t(this,Rt).call(this),this.container=this.parentElement,new ResizeObserver(t(this,It)).observe(this.container),t(this,It).call(this);let{MapboxAddressMinimap:i,ImageContainer:o,Image:n,Marker:a}=t(this,m);d(this,S,new Ti(o,a,this.keepMarkerCentered,no,this.markerAnchor)),t(this,S).reCenter(),n.onload=t(this,si),n.onerror=t(this,ni),n.src=t(this,q),t(this,_)?i.removeAttribute("aria-hidden"):i.setAttribute("aria-hidden","true")}attributeChangedCallback(e,i,o){if(e==="access-token")this.accessToken=o;else if(e==="can-adjust-marker")this.canAdjustMarker=o==="true";else if(e==="keep-marker-centered")this.keepMarkerCentered=o==="true";else if(e==="marker-anchor"){let n=o;this.markerAnchor=n,t(this,S)&&(t(this,S).anchor=n)}else e==="satellite-toggle"&&(this.satelliteToggle=o==="true")}};Mt=new WeakMap,ae=new WeakMap,ye=new WeakMap,_=new WeakMap,q=new WeakMap,V=new WeakMap,le=new WeakMap,m=new WeakMap,S=new WeakMap,xt=new WeakMap,Et=new WeakMap,Tt=new WeakMap,de=new WeakMap,yt=new WeakMap,St=new WeakMap,Se=new WeakMap,At=new WeakMap,Ct=new WeakMap,Lt=new WeakMap,kt=new WeakMap,si=new WeakMap,ni=new WeakMap,wt=new WeakMap,Ae=new WeakMap,Ce=new WeakMap,It=new WeakMap,Ht=new WeakMap,ri=new WeakMap,Rt=new WeakMap,ai=new WeakMap,Le.observedAttributes=["access-token","can-adjust-marker","keep-marker-centered","marker-anchor","satellite-toggle"];window.MapboxAddressMinimap=Le;window.customElements.get("mapbox-address-minimap")||customElements.define("mapbox-address-minimap",Le);var He=require("@mapbox/search-js-core");var D,ce,Bt,Ft,Ot,ao=class{constructor(e,i,o){r(this,D,void 0);r(this,ce,void 0);this.listbox=new $;r(this,Bt,e=>{t(this,ce).fire("suggest",e.clone(t(this,D)))});r(this,Ft,e=>{t(this,ce).fire("suggesterror",e.clone(t(this,D)))});r(this,Ot,e=>{if(t(this,ce).fire("retrieve",e.clone(t(this,D))),!t(this,D))return;let i=e.detail;!i||!i.features||!i.features.length||Wt(i.features[0],t(this,D))});d(this,D,i),d(this,ce,e),this.listbox.input=t(this,D),this.listbox.session=new He.SearchSession(o),this.listbox.session.sessionToken=b.autofillSessionToken,this.listbox.addEventListener("suggest",t(this,Bt)),this.listbox.addEventListener("suggesterror",t(this,Ft)),this.listbox.addEventListener("retrieve",t(this,Ot)),document.body.appendChild(this.listbox)}remove(){this.listbox.remove(),this.listbox.removeEventListener("suggest",t(this,Bt)),this.listbox.removeEventListener("suggesterror",t(this,Ft)),this.listbox.removeEventListener("retrieve",t(this,Ot))}};D=new WeakMap,ce=new WeakMap,Bt=new WeakMap,Ft=new WeakMap,Ot=new WeakMap;var ke,we,Ie,Pt,_t,Dt,lo=class extends He.Evented{constructor({accessToken:e,options:i,theme:o}){super();this.instances=[];r(this,ke,void 0);r(this,we,new He.MapboxAutofill);r(this,Ie,void 0);r(this,Pt,void 0);r(this,_t,()=>{G(ze(),t(this,ke))||this.update()});r(this,Dt,new MutationObserver(t(this,_t)));b.autofillSessionEnabled=!0,this.accessToken=e||b.accessToken,i&&(this.options=i),o&&(this.theme=o),this.update()}get accessToken(){return t(this,we).accessToken}set accessToken(e){t(this,we).accessToken=e}get options(){return t(this,Ie)}set options(e){d(this,Ie,h(h({},t(this,Ie)),e)),this.instances.forEach(i=>{i.listbox.options=h(h({},i.listbox.options),e)})}get theme(){return t(this,Pt)}set theme(e){d(this,Pt,e),this.instances.forEach(i=>{i.listbox.theme=e})}update(){this.instances.forEach(e=>{e.remove()}),d(this,ke,ze()),this.instances=[],t(this,ke).forEach(e=>{let i=new ao(this,e,t(this,we));i.listbox.options=this.options,i.listbox.theme=this.theme,this.instances.push(i)})}observe(){t(this,Dt).observe(document,{subtree:!0,childList:!0}),t(this,_t).call(this)}unobserve(){t(this,Dt).disconnect()}};ke=new WeakMap,we=new WeakMap,Ie=new WeakMap,Pt=new WeakMap,_t=new WeakMap,Dt=new WeakMap;function co(s){let{accessToken:e,options:i}=s;return new lo({accessToken:e,options:i})}var uo=require("@mapbox/search-js-core");var yi=new ee;function po(i){return N(this,arguments,function*(s,e={}){let{sections:o=[]}=e;yi.parentNode||document.body.appendChild(yi);let n={type:"nochange"},a=ze(s),l=vi(s),u=Array.from(document.querySelectorAll("mapbox-search-listbox"));for(let c of a){if(o.length){let A=l.find(ue=>ue.input===c);if(!A||!o.includes(A.section))continue}let p=Yt(s,c),v=u.find(A=>A.input===c);if(v){let A=v.retrieveFeature;if(A){let ue=Vi(A);if(!Gi(p,ue))continue}}let j=e.accessToken||b.accessToken,k=yield yi.tryShow(p,pe(h({},e),{accessToken:j}));if(k.type==="change"){c.dataset.mapboxSuccess="true";let A=(0,uo.featureToSuggestion)(k.feature);bi(s,c,A),v&&(v.retrieveFeature=k.feature)}k.type==="change"&&n.type!=="cancel"&&(n=k),k.type==="cancel"&&(n=k)}return n})}module.exports=To(ss);
//# sourceMappingURL=index.js.map
